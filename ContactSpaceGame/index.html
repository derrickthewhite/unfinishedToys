<!DOCTYPE html>
<html>
<head>
	<title>Contact (The Space Civilization Game)</title>
	<link href="main.css" rel="stylesheet">
	<!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.1/knockout-debug.js"></script>
	<!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js"></script>-->
	<script type="text/javascript" src= "../../Tools/knockout-3.4.0.js"></script>
	<script type="text/javascript" src="tools.js"></script>
	<script type="text/javascript" src="AlienRaceNames.js"></script>
	<script type="text/javascript" src="resourceTree.js"></script>
	<script type="text/javascript" src="resource.js"></script>
	<script type="text/javascript" src="resourceUse.js"></script>
	<script type="text/javascript" src="colony.js"></script>
	<script type="text/javascript" src="main.js"></script>
	<script>


	</script>
</head>
<body onload="load()">

	<h1>Contact</h1>
	<div id="main">
		<div data-bind="text:id"></div>
		<div>
			<div>Game State</div>
			<div data-bind="foreach:empires" class="Empire" id = "Empire">
				<div data-bind="css: {selected: selected} ">
				<div >
					<span data-bind="text:name"></span>
					<span data-bind="click:select">Select</span>
					<span data-bind="ifnot:visible, click:view">View</span>
					<span data-bind="if:visible, click:hide">Hide</span>
				</div>
				<!-- ko if:visible -->
				<div data-bind="foreach:colonies" class = "Colony">
					<div data-bind="css: {selected: selected} ">
					<div >
						<span data-bind="text:name"></span>
						<span data-bind="if: $parent.selected, click:select">Select</span>
						<span data-bind="ifnot:visible, click:view">View</span>
						<span data-bind="if:visible, click:hide">Hide</span>
					</div>
					<!-- ko if:visible -->
					<!--
					<div data-bind="foreach:resources">
						<div class= "Resource">
							<span data-bind="text:name" ></span>:<span data-bind="text:value"></span>
						</div>
					</div>
					-->
					<div data-bind="foreach:resourceFlow">
						<div class= "Resource">
							<span data-bind="text:name" ></span>
							:
							<span data-bind="text:value"></span>
						</div>
					</div>
					<div data-bind="foreach:standingResources">
						<div>
							<span data-bind="text:number"></span>
							<span data-bind="text:id"></span>
							<!-- TODO: Hide Maintainace options if relevant-->
							<span data-bind="ifnot:visible, click:view">View</span>
							<span data-bind="if:visible, click:hide">Hide</span>
							<!-- ko if:visible -->
							<div data-bind="component: {name:'projectDisplay', params: {project:maintain,observable:actionNumbers['maintain'],max:unassignedNumbers}}"></div>
							<div data-bind="component: {name:'projectDisplay', params: {project:neglect,observable:actionNumbers['neglect'],max:unassignedNumbers}}"></div>
							<div data-bind="component: {name:'projectDisplay', params: {project:abandon,observable:actionNumbers['abandon'],max:unassignedNumbers}}"></div>
							<!-- ko if:hasBuild -->
							<div data-bind="component: {name:'projectDisplay', params: {project:build,observable:actionNumbers['build']}}"></div>
							<!-- /ko -->
							<!-- ko if:useInputTypes -->
							<div data-bind="foreach:useInputTypes">
								<select data-bind="options:$parents[1].resourcesByType()[$data],
									optionsText:function (item) { return '('+item.id + ':' +item.number()+')'}, 
									value:$parent.useInputs[$index()]"></select>
							</div>
							<button data-bind='click:$parent.addResourceUse'>Confirm</button>
							<div data-bind="foreach:$parent.resourceUsesByUsingResourceID()[$data.id]">
								<div>
									<!-- ko foreach:inputs -->
										<span data-bind="text:$data.id"></span>
									<!-- /ko -->
									<input type="number" min=0 data-bind="value:number,attr:{max: $parents[1].resourcesAvailable($data)}"></input>
									<button data-bind="click:$parents[1].removeResourceUse">cancel</button>
									<div data-bind="component: {name:'projectDisplay', params: {project:outputProject(),title:''}}"></div>
									<div data-bind="component: {name:'projectDisplay', params: {project:totalOutputProject(),title:''}}"></div>
								</div>
							</div>
							<!-- /ko -->
							<!-- /ko -->
						</div>
					</div>
					<!--
					<div data-bind="foreach:projects">
						<span data-bind="text:type.name"></span>
						<input type="number" min="0" data-bind="value:number"></input>
						<span data-bind="foreach:cost"> 
							<span data-bind="text:value"></span> 
							<span data-bind="text:name"></span> 
						</span>
						=>
						<span data-bind="type.result.name"
						<br>
					</div>
					-->
					<!-- /ko -->
					</div>
				</div>
				<!-- /ko -->
				</div>
			</div>
			<div id="Actions" data-bind="if:currentMode.play">
				<button data-bind="click:runTurn">Take Turn</button>
				<button data-bind="click:showAddProject">Add Project</button>
			</div>
		</div>
		<div id = "addProject" class= "Creation" data-bind="if:currentMode.addProject">
				You are adding a project to
				<span data-bind="text:currentColony().name"></span>
				in the
				<span data-bind="text:currentEmpire().name"></span>
				Empire <br>
				<select data-bind="options:validProjectsToAdd, optionsText:'name', value: selectedProject"></select>
				<button data-bind="click:addProject">Add Project</button>
		</div>
		<div id = "CreateColony" class= "Creation" data-bind="if:currentMode.addColony">
			<div>
				You are building a colony for
				<span data-bind="text:currentEmpire().name"></span>.
				Please Enter its name
			</div>
			Name:<input type="text" data-bind="value:name">
			<button>Accept Data</button>
			<button>Build This For Me</button>
		</div>
		<div  data-bind="visible:currentMode.start, with:startState">
			<div>Welcome to Contact! (the space game). Start your game</div>
			<div>Empire Name: <input type = "text" data-bind="value:empireName"></span></div>
			<div>#Starting Colonies: <input type = "number" data-bind="value:numColonies"></span></div>
			<div data-bind="foreach:colonyNames">
				<input type="text" data-bind="value:name"><br>
			</div>
			<div data-bind="text:colonyNames()[0].name"></div>
			<div># Competing Empires: <input type = "number" min="1" max="20" data-bind="value:numEmpires"></span></div>
			<button data-bind="click:generateGame">Start!</button>
		</div>
		<div class="error" data-bind="text:error"></div>
	</div>
</body>
</html>